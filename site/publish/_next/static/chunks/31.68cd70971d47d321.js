"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[31],{31:(t,e,i)=>{i.r(e),i.d(e,{FormdownUI:()=>W,UIExtensionSupport:()=>j,createFormdownUI:()=>J,registerFormdownUI:()=>Y,uiExtensionSupport:()=>L});var n,r,s,o=i(5933),a=i(5082),l=i(3396);function h(){let t=(0,o._)(['<div class="error">No Formdown content provided</div>']);return h=function(){return t},t}function d(){let t=(0,o._)(['<div class="error">Generated HTML is empty</div>']);return d=function(){return t},t}function c(){let t=(0,o._)(['<div id="content-container"></div>']);return c=function(){return t},t}function u(){let t=(0,o._)(['<div class="error">Error rendering content: ',"</div>"]);return u=function(){return t},t}function p(){let t=(0,o._)(["\n    :host {\n      display: block;\n      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n      line-height: 1.5;\n      color: var(--theme-text-primary, #1f2937);\n      background: var(--theme-bg-primary, #ffffff);\n      max-width: 100%;\n      box-sizing: border-box;\n      overflow-y: auto;\n    }\n\n    * {\n      box-sizing: border-box;\n    }\n\n    .formdown-form {\n      max-width: 100%;\n      width: 100%;\n      margin: 0;\n      padding: 0;\n      display: none; /* Hidden form for form attribute reference */\n    }\n\n    .formdown-field {\n      margin-bottom: 1.5rem;\n      max-width: 100%;\n    }\n\n    /* Add spacing between consecutive field containers */\n    .formdown-field-container {\n      margin-bottom: 0.75rem;\n    }\n    \n    .formdown-field-container:last-child {\n      margin-bottom: 0;\n    }\n\n    label {\n      display: block;\n      margin-bottom: 0.5rem;\n      font-weight: 500;\n      color: var(--theme-text-primary, #374151);\n      font-size: 0.875rem;\n      line-height: 1.25;\n    }\n\n    input, textarea, select {\n      width: 100%;\n      max-width: 100%;\n      padding: 0.75rem;\n      border: 1px solid var(--theme-border, #d1d5db);\n      border-radius: 0.5rem;\n      font-size: 1rem;\n      font-family: inherit;\n      line-height: 1.5;\n      transition: all 0.15s ease-in-out;\n      background-color: var(--theme-bg-primary, #ffffff);\n      color: var(--theme-text-primary, #1f2937);\n    }\n\n    input:focus, textarea:focus, select:focus {\n      outline: none;\n      border-color: var(--theme-accent, #3b82f6);\n      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n      background-color: var(--theme-bg-primary, #ffffff);\n    }\n\n    input:hover, textarea:hover, select:hover {\n      border-color: var(--theme-text-secondary, #9ca3af);\n    }\n\n    input[type=\"radio\"], input[type=\"checkbox\"] {\n      width: auto;\n      max-width: none;\n      margin-right: 0.5rem;\n      margin-bottom: 0;\n    }\n\n    textarea {\n      min-height: 6rem;\n      resize: vertical;\n    }\n\n    select {\n      cursor: pointer;\n      appearance: none;\n      -webkit-appearance: none;\n      -moz-appearance: none;\n      background-image: url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e\");\n      background-position: right 0.5rem center;\n      background-repeat: no-repeat;\n      background-size: 1.5em 1.5em;\n      padding-right: 2.5rem;\n    }\n\n    fieldset {\n      border: 1px solid var(--theme-border, #d1d5db);\n      border-radius: 0.5rem;\n      padding: 1.25rem;\n      margin: 0 0 1.5rem 0;\n      max-width: 100%;\n      background-color: var(--theme-bg-primary, #ffffff);\n    }\n\n    legend {\n      font-weight: 600;\n      color: var(--theme-text-primary, #374151);\n      padding: 0 0.75rem;\n      font-size: 0.875rem;\n    }\n\n    fieldset label {\n      display: flex;\n      align-items: center;\n      margin-bottom: 0.75rem;\n      font-weight: normal;\n      font-size: 0.875rem;\n    }    /* Enhanced inline formdown-field elements with contentEditable */\n    formdown-field,\n    [contenteditable=\"true\"]:not(textarea) {\n      display: inline;\n      min-width: 60px;\n      max-width: 200px;\n      padding: 0.125rem 0.25rem;\n      border: 1px solid transparent;\n      background-color: var(--theme-bg-secondary, rgba(239, 246, 255, 0.6));\n      border-radius: 0.125rem;\n      font-style: normal;\n      color: inherit;\n      font-size: inherit;\n      line-height: inherit;\n      font-family: inherit;\n      font-weight: inherit;\n      cursor: text;\n      outline: none;\n      transition: all 0.15s ease-in-out;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      vertical-align: baseline;\n      box-decoration-break: clone;\n    }\n\n    [contenteditable=\"true\"]:not(textarea):hover {\n      background-color: var(--theme-bg-secondary, rgba(219, 234, 254, 0.8));\n      border-color: var(--theme-border, rgba(147, 197, 253, 0.5));\n    }\n\n    [contenteditable=\"true\"]:not(textarea):focus {\n      background-color: var(--theme-bg-primary, rgba(255, 255, 255, 0.9));\n      border-color: var(--theme-accent, #3b82f6);\n      box-shadow: 0 0 0 1px rgba(59, 130, 246, 0.2);\n      color: var(--theme-accent, #1e40af);\n    }\n\n    [contenteditable=\"true\"]:not(textarea):empty::before {\n      content: attr(data-placeholder);\n      color: var(--theme-text-secondary, #94a3b8);\n      font-style: italic;\n      opacity: 0.7;\n    }\n\n    /* Enhanced typography for markdown content */\n    h1, h2, h3, h4, h5, h6 {\n      margin-top: 0;\n      margin-bottom: 1rem;\n      color: var(--theme-text-primary, #1f2937);\n      font-weight: 600;\n      line-height: 1.25;\n    }\n\n    h1 { \n      font-size: 2.25rem; \n      font-weight: 700;\n    }\n    h2 { \n      font-size: 1.875rem; \n      font-weight: 600;\n    }\n    h3 { \n      font-size: 1.5rem; \n      font-weight: 600;\n    }\n    h4 { \n      font-size: 1.25rem; \n      font-weight: 600;\n    }\n    h5 { \n      font-size: 1.125rem; \n      font-weight: 600;\n    }\n    h6 { \n      font-size: 1rem; \n      font-weight: 600;\n    }\n\n    p {\n      margin-bottom: 1rem;\n      line-height: 1.7;\n      color: var(--theme-text-secondary, #4b5563);\n    }\n\n    /* Responsive design */\n    @media (max-width: 768px) {\n      :host {\n        font-size: 0.875rem;\n      }\n      \n      input, textarea, select {\n        padding: 0.625rem;\n        font-size: 0.875rem;\n      }\n      \n      h1 { font-size: 1.875rem; }\n      h2 { font-size: 1.5rem; }\n      h3 { font-size: 1.25rem; }\n    }\n\n    .error {\n      color: var(--theme-error, #dc2626);\n      font-size: 0.875rem;\n      margin-top: 0.5rem;\n      display: block;\n    }\n\n    /* Field validation styles */\n    .field-error {\n      border-color: var(--theme-error, #dc2626) !important;\n      box-shadow: 0 0 0 1px rgba(220, 38, 38, 0.1) !important;\n    }\n\n    .field-error:focus {\n      border-color: var(--theme-error, #dc2626) !important;\n      box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1) !important;\n    }\n\n    .validation-error-message {\n      color: var(--theme-error, #dc2626);\n      font-size: 0.75rem;\n      margin-top: 0.25rem;\n      display: block;\n      font-weight: 500;\n    }\n\n    /* Success state */\n    .field-valid {\n      border-color: #10b981 !important;\n      box-shadow: 0 0 0 1px rgba(16, 185, 129, 0.1) !important;\n    }\n\n    .submit-button {\n      background-color: #3b82f6;\n      color: white;\n      padding: 0.75rem 1.5rem;\n      border: none;\n      border-radius: 0.5rem;\n      font-size: 1rem;\n      font-weight: 500;\n      cursor: pointer;\n      transition: all 0.15s ease-in-out;\n      margin-top: 1.5rem;\n      width: auto;\n      max-width: 100%;\n    }\n\n    .submit-button:hover {\n      background-color: #2563eb;\n      transform: translateY(-1px);\n      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n    }\n\n    .submit-button:disabled {\n      background-color: #9ca3af;\n      cursor: not-allowed;\n      transform: none;\n      box-shadow: none;\n    }\n\n    .submit-button:active {\n      transform: translateY(0);\n    }\n\n    /* Ensure content doesn't overflow */\n    #content-container {\n      max-width: 100%;\n      overflow-wrap: break-word;\n      word-wrap: break-word;\n    }    /* Radio and checkbox groups */\n    .radio-group, .checkbox-group {\n      display: flex;\n      gap: 0.75rem;\n      flex-wrap: wrap;\n    }\n\n    /* Inline layout (default) */\n    .radio-group.inline, .checkbox-group.inline {\n      flex-direction: row;\n      align-items: center;\n    }\n\n    /* Vertical layout */\n    .radio-group.vertical, .checkbox-group.vertical {\n      flex-direction: column;\n      align-items: flex-start;\n    }\n\n    .formdown-option-label {\n      display: flex;\n      align-items: center;\n      margin-bottom: 0;\n      font-weight: normal;\n      cursor: pointer;\n      font-size: 0.875rem;\n      white-space: nowrap;\n    }\n\n    .formdown-option-label input {\n      margin-right: 0.5rem;\n      margin-bottom: 0;\n    }\n\n    .formdown-option-label span {\n      user-select: none;\n    }\n\n    /* Legacy support for old structure */\n    .radio-group label, .checkbox-group label {\n      display: flex;\n      align-items: center;\n      margin-bottom: 0;\n      font-weight: normal;\n      cursor: pointer;\n    }/* Better spacing for form elements */\n    .formdown-form > * + * {\n      margin-top: 1rem;\n    }\n  "]);return p=function(){return t},t}let m=globalThis,f=m.ShadowRoot&&(void 0===m.ShadyCSS||m.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,g=Symbol(),y=new WeakMap,v=class{get styleSheet(){let t=this.o,e=this.t;if(f&&void 0===t){let i=void 0!==e&&1===e.length;i&&(t=y.get(e)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),i&&y.set(e,t))}return t}toString(){return this.cssText}constructor(t,e,i){if(this._$cssResult$=!0,i!==g)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}},b=t=>new v("string"==typeof t?t:t+"",void 0,g),_=(t,e)=>{if(f)t.adoptedStyleSheets=e.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet);else for(let i of e){let e=document.createElement("style"),n=m.litNonce;void 0!==n&&e.setAttribute("nonce",n),e.textContent=i.cssText,t.appendChild(e)}},$=f?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(let i of t.cssRules)e+=i.cssText;return b(e)})(t):t,{is:E,defineProperty:w,getOwnPropertyDescriptor:S,getOwnPropertyNames:A,getOwnPropertySymbols:x,getPrototypeOf:C}=Object,U=globalThis,M=U.trustedTypes,P=M?M.emptyScript:"",k=U.reactiveElementPolyfillSupport,O=(t,e)=>t,R={toAttribute(t,e){switch(e){case Boolean:t=t?P:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let i=t;switch(e){case Boolean:i=null!==t;break;case Number:i=null===t?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch(t){i=null}}return i}},T=(t,e)=>!E(t,e),F={attribute:!0,type:String,converter:R,reflect:!1,useDefault:!1,hasChanged:T};null!=Symbol.metadata||(Symbol.metadata=Symbol("metadata")),null!=U.litPropertyMetadata||(U.litPropertyMetadata=new WeakMap);class H extends HTMLElement{static addInitializer(t){var e;this._$Ei(),(null!=(e=this.l)?e:this.l=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F;if(e.state&&(e.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(t)&&((e=Object.create(e)).wrapped=!0),this.elementProperties.set(t,e),!e.noAccessor){let i=Symbol(),n=this.getPropertyDescriptor(t,i,e);void 0!==n&&w(this.prototype,t,n)}}static getPropertyDescriptor(t,e,i){var n;let{get:r,set:s}=null!=(n=S(this.prototype,t))?n:{get(){return this[e]},set(t){this[e]=t}};return{get:r,set(e){let n=null==r?void 0:r.call(this);null==s||s.call(this,e),this.requestUpdate(t,n,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){var e;return null!=(e=this.elementProperties.get(t))?e:F}static _$Ei(){if(this.hasOwnProperty(O("elementProperties")))return;let t=C(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(O("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(O("properties"))){let t=this.properties;for(let e of[...A(t),...x(t)])this.createProperty(e,t[e])}let t=this[Symbol.metadata];if(null!==t){let e=litPropertyMetadata.get(t);if(void 0!==e)for(let[t,i]of e)this.elementProperties.set(t,i)}for(let[t,e]of(this._$Eh=new Map,this.elementProperties)){let i=this._$Eu(t,e);void 0!==i&&this._$Eh.set(i,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){let e=[];if(Array.isArray(t))for(let i of new Set(t.flat(1/0).reverse()))e.unshift($(i));else void 0!==t&&e.push($(t));return e}static _$Eu(t,e){let i=e.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof t?t.toLowerCase():void 0}_$Ev(){var t;this._$ES=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$E_(),this.requestUpdate(),null==(t=this.constructor.l)||t.forEach(t=>t(this))}addController(t){var e,i;(null!=(i=this._$EO)?i:this._$EO=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&(null==(e=t.hostConnected)||e.call(t))}removeController(t){var e;null==(e=this._$EO)||e.delete(t)}_$E_(){let t=new Map;for(let e of this.constructor.elementProperties.keys())this.hasOwnProperty(e)&&(t.set(e,this[e]),delete this[e]);t.size>0&&(this._$Ep=t)}createRenderRoot(){var t;let e=null!=(t=this.shadowRoot)?t:this.attachShadow(this.constructor.shadowRootOptions);return _(e,this.constructor.elementStyles),e}connectedCallback(){var t,e;null!=this.renderRoot||(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null==(t=this._$EO)||t.forEach(t=>{var e;return null==(e=t.hostConnected)?void 0:e.call(t)})}enableUpdating(t){}disconnectedCallback(){var t;null==(t=this._$EO)||t.forEach(t=>{var e;return null==(e=t.hostDisconnected)?void 0:e.call(t)})}attributeChangedCallback(t,e,i){this._$AK(t,i)}_$ET(t,e){var i;let n=this.constructor.elementProperties.get(t),r=this.constructor._$Eu(t,n);if(void 0!==r&&!0===n.reflect){let s=((null==(i=n.converter)?void 0:i.toAttribute)!==void 0?n.converter:R).toAttribute(e,n.type);this._$Em=t,null==s?this.removeAttribute(r):this.setAttribute(r,s),this._$Em=null}}_$AK(t,e){var i,n,r;let s=this.constructor,o=s._$Eh.get(t);if(void 0!==o&&this._$Em!==o){let t=s.getPropertyOptions(o),a="function"==typeof t.converter?{fromAttribute:t.converter}:(null==(i=t.converter)?void 0:i.fromAttribute)!==void 0?t.converter:R;this._$Em=o;let l=a.fromAttribute(e,t.type);this[o]=null!=(r=null!=l?l:null==(n=this._$Ej)?void 0:n.get(o))?r:l,this._$Em=null}}requestUpdate(t,e,i){var n,r;if(void 0!==t){let s=this.constructor,o=this[t];if(null!=i||(i=s.getPropertyOptions(t)),!((null!=(r=i.hasChanged)?r:T)(o,e)||i.useDefault&&i.reflect&&o===(null==(n=this._$Ej)?void 0:n.get(t))&&!this.hasAttribute(s._$Eu(t,i))))return;this.C(t,e,i)}!1===this.isUpdatePending&&(this._$ES=this._$EP())}C(t,e,i,n){var r,s,o;let{useDefault:a,reflect:l,wrapped:h}=i;a&&!(null!=(r=this._$Ej)?r:this._$Ej=new Map).has(t)&&(this._$Ej.set(t,null!=(s=null!=n?n:e)?s:this[t]),!0!==h||void 0!==n)||(this._$AL.has(t)||(this.hasUpdated||a||(e=void 0),this._$AL.set(t,e)),!0===l&&this._$Em!==t&&(null!=(o=this._$Eq)?o:this._$Eq=new Set).add(t))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}let t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t,e;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(null!=this.renderRoot||(this.renderRoot=this.createRenderRoot()),this._$Ep){for(let[t,e]of this._$Ep)this[t]=e;this._$Ep=void 0}let t=this.constructor.elementProperties;if(t.size>0)for(let[e,i]of t){let{wrapped:t}=i,n=this[e];!0!==t||this._$AL.has(e)||void 0===n||this.C(e,void 0,i,n)}}let i=!1,n=this._$AL;try{(i=this.shouldUpdate(n))?(this.willUpdate(n),null==(t=this._$EO)||t.forEach(t=>{var e;return null==(e=t.hostUpdate)?void 0:e.call(t)}),this.update(n)):this._$EM()}catch(t){throw i=!1,this._$EM(),t}i&&this._$AE(n)}willUpdate(t){}_$AE(t){var e;null==(e=this._$EO)||e.forEach(t=>{var e;return null==(e=t.hostUpdated)?void 0:e.call(t)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Eq&&(this._$Eq=this._$Eq.forEach(t=>this._$ET(t,this[t]))),this._$EM()}updated(t){}firstUpdated(t){}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}}H.elementStyles=[],H.shadowRootOptions={mode:"open"},H[O("elementProperties")]=new Map,H[O("finalized")]=new Map,null==k||k({ReactiveElement:H}),(null!=(s=U.reactiveElementVersions)?s:U.reactiveElementVersions=[]).push("2.1.1");let z={attribute:!0,type:String,converter:R,reflect:!1,hasChanged:T},I=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,e=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,{kind:n,metadata:r}=i,s=globalThis.litPropertyMetadata.get(r);if(void 0===s&&globalThis.litPropertyMetadata.set(r,s=new Map),"setter"===n&&((t=Object.create(t)).wrapped=!0),s.set(i.name,t),"accessor"===n){let{name:n}=i;return{set(i){let r=e.get.call(this);e.set.call(this,i),this.requestUpdate(n,r,t)},init(e){return void 0!==e&&this.C(n,void 0,t,e),e}}}if("setter"===n){let{name:n}=i;return function(i){let r=this[n];e.call(this,i),this.requestUpdate(n,r,t)}}throw Error("Unsupported decorator location: "+n)};function D(t){return(e,i)=>"object"==typeof i?I(t,e,i):((t,e,i)=>{let n=e.hasOwnProperty(i);return e.constructor.createProperty(i,t),n?Object.getOwnPropertyDescriptor(e,i):void 0})(t,e,i)}let q=class t{static getInstance(){return t.instance||(t.instance=new t),t.instance}async initialize(){if(!this.initialized)try{await l.FM.initialize(),this.setupUIHooks(),this.initialized=!0}catch(t){console.debug("Extension system already initialized or error:",t)}}setupUIHooks(){(0,l.R7)({name:"field-render",priority:1,handler:this.handleFieldRender.bind(this)}),(0,l.R7)({name:"field-validate",priority:1,handler:this.handleFieldValidate.bind(this)})}handleFieldRender(t,e){return e}handleFieldValidate(t,e){return{valid:!0,message:""}}async registerUIPlugin(t){await (0,l.F3)(t)}getExtensionStats(){return l.FM.getStats()}async executeUIHooks(t,e){for(var i=arguments.length,n=Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];return l.FM.executeHooks(t,e,...n)}constructor(){this.initialized=!1}};q.instance=null;let j=q,L=j.getInstance();var N=Object.defineProperty,B=Object.getOwnPropertyDescriptor,V=(t,e,i,n)=>{for(var r,s=n>1?void 0:n?B(e,i):e,o=t.length-1;o>=0;o--)(r=t[o])&&(s=(n?r(e,i,s):r(s))||s);return n&&s&&N(e,i,s),s};let W=class extends a.WF{getFormId(){return this.formId||this._uniqueFormId}get data(){return this._data}set data(t){if(this._isUpdatingUI)return;let e=this._data;this._data=null!=t&&"object"==typeof t?{...t}:{},this.requestUpdate("data",e),this.formManager&&this._schema&&!this._isUpdatingUI&&this.formManager.updateData(this._data)}updateData(t){this.data=t,this.formManager&&this._schema&&this.formManager.updateData(t)}updateField(t,e){this.data={...this.data,[t]:e},this.formManager&&this._schema&&this.formManager.setFieldValue(t,e)}setupCoreUIBridge(){this.formManager.setupComponentBridge({id:"formdown-ui",type:"ui",emit:(t,e)=>{this.dispatchEvent(new CustomEvent(t,{detail:e,bubbles:!0}))},on:(t,e)=>()=>{}})}setupFormManagerEvents(){this.formManager.on("data-change",t=>{let{formData:e}=t;this._isUpdatingUI||(this._isUpdatingUI=!0,this.data=e,this._isUpdatingUI=!1)}),this.formManager.on("validation-error",t=>{let{field:e,errors:i}=t;this.dispatchEvent(new CustomEvent("validation-error",{detail:{field:e,errors:i},bubbles:!0}))}),this.formManager.on("form-submit",t=>{let{formData:e}=t;this.dispatchEvent(new CustomEvent("form-submit",{detail:{formData:e},bubbles:!0}))})}validate(){return this.formManager&&this._schema?this.formManager.validate():{isValid:!0,errors:[]}}getSchema(){return this._schema}reset(){this.formManager&&this._schema&&(this.formManager.reset(),this.data=this.formManager.getData())}isDirty(){return!!this.formManager&&!!this._schema&&this.formManager.isDirty()}async connectedCallback(){var t;super.connectedCallback();try{await L.initialize()}catch(t){console.debug("Extension system initialization:",t)}!this.content&&null!=(t=this.textContent)&&t.trim()&&(this.content=this.textContent.trim(),this.textContent="")}render(){if(!this.content||!this.content.trim())return(0,a.qy)(h());try{this.formManager.parse(this.content),this._schema=this.formManager.getSchema(),this.data&&Object.keys(this.data).length>0&&this.formManager.updateData(this.data);let t=this.formManager.renderToTemplate({container:this});return t.html&&t.html.trim()?(0,a.qy)(c()):(0,a.qy)(d())}catch(e){let t=e instanceof Error?e.message:String(e);return(0,a.qy)(u(),t)}}firstUpdated(){this.updateContent(),setTimeout(()=>{this.syncUIFromData()},0)}updated(t){super.updated(t),t.has("content")&&(this.updateContent(),setTimeout(()=>{this.syncUIFromData()},0)),t.has("data")&&this.syncUIFromData()}updateContent(){var t,e;if(!(!this.content||!this.content.trim()))try{let e=null==(t=this.shadowRoot)?void 0:t.querySelector("#content-container");if(!e)return;this.formManager.parse(this.content),this._schema=this.formManager.getSchema(),this.data&&Object.keys(this.data).length>0&&this.formManager.updateData(this.data);let i=this.formManager.renderToTemplate({container:this});if(!i.html||""===i.html.trim()){e.innerHTML='<div class="error">FormManager returned empty HTML</div>';return}e.innerHTML=i.html,this.injectExtensionAssets(e),this.setupFieldHandlers(e)}catch(i){let t=null==(e=this.shadowRoot)?void 0:e.querySelector("#content-container");if(t){let e=i instanceof Error?i.message:String(i);t.innerHTML='<div class="error">Error: '.concat(e,"</div>")}}}injectExtensionAssets(t){try{let e=this.getUsedFieldTypes(t),i=l.FM.getFieldTypeRegistry().getStylesForTypes(e);i&&this.injectStyles(i);let n=l.FM.getFieldTypeRegistry().getScriptsForTypes(e);n&&this.injectScripts(n)}catch(t){console.debug("Extension asset injection failed:",t)}}getUsedFieldTypes(t){let e=new Set;return t.querySelectorAll("[data-field-type]").forEach(t=>{let i=t.getAttribute("data-field-type");i&&e.add(i)}),t.querySelectorAll('[class*="formdown-"][class*="-field"]').forEach(t=>{let i=t.className.match(/formdown-(\w+)-field/);i&&e.add(i[1])}),Array.from(e)}injectStyles(t){var e,i;if(!t.trim())return;let n=null==(e=this.shadowRoot)?void 0:e.querySelector("#extension-styles");if(n)n.textContent=t;else{let e=document.createElement("style");e.id="extension-styles",e.textContent=t,null==(i=this.shadowRoot)||i.appendChild(e)}}injectScripts(t){if(!t.trim())return;let e="formdown-extension-scripts";if(document.getElementById(e))return;let i=document.createElement("script");i.id=e,i.textContent=t,document.head.appendChild(i)}setupFieldHandlers(t){this.fieldRegistry.clear();let e=t.querySelectorAll('input:not([type="radio"]):not([type="checkbox"]), [contenteditable="true"]');this.setupKeyboardNavigation(e),t.querySelectorAll('input, textarea, select, [contenteditable="true"]').forEach(t=>{let e=this.getFieldName(t);if(e){this.registerField(e,t);let i=this.data[e];if(void 0!==i)this.setElementValue(t,i);else{let i=this.getSchemaDefaultValue(e);void 0!==i&&this.updateDataReactively(e,i,t)}this.setupFieldEventHandlers(t,e),this.setupFieldSpecificBehaviors(t)}else t.id&&t.id.includes("_other_input")&&this.setupOtherInputHandlers(t)})}setupKeyboardNavigation(t){t.forEach((e,i)=>{e.addEventListener("keydown",n=>{if("Enter"===n.key){if(n.preventDefault(),"textarea"===e.tagName.toLowerCase())return;let r=i+1;r<t.length&&t[r].focus()}})})}setupFieldEventHandlers(t,e){let i=t=>{this.formManager.handleUIEvent(t,this.domBinder)};this.domBinder.bindFieldToElement(e,t,{querySelector:t=>{var e;return null==(e=this.shadowRoot)?void 0:e.querySelector(t)},querySelectorAll:t=>{var e;return Array.from((null==(e=this.shadowRoot)?void 0:e.querySelectorAll(t))||[])}}),t.hasAttribute("contenteditable")?t.addEventListener("input",i):(t.addEventListener("input",i),t.addEventListener("change",i))}setupFieldSpecificBehaviors(t){t.hasAttribute("contenteditable")&&this.setupContentEditableBehaviors(t)}setupOtherInputHandlers(t){let e=t.id.replace("_other_input",""),i=()=>{var i,n,r;let s=null==(i=this.shadowRoot)?void 0:i.querySelector("#".concat(e,"_other_radio")),o=null==(n=this.shadowRoot)?void 0:n.querySelector("#".concat(e,"_other_checkbox"));if(s)s.checked=!0,this.updateDataReactively(e,t.value.trim(),t);else if(o){o.checked=!0;let i=null==(r=this.shadowRoot)?void 0:r.querySelectorAll('input[type="checkbox"][name="'.concat(e,'"]')),n=[];i.forEach(e=>{if(e.checked)if(""===e.value&&e.id.includes("_other_checkbox")){let e=t.value.trim();e&&n.push(e)}else""!==e.value&&n.push(e.value)}),this.updateDataReactively(e,n,t)}};t.addEventListener("input",i),t.addEventListener("change",i)}setupContentEditableBehaviors(t){var e;let i=t.dataset.placeholder;(null==(e=t.textContent)?void 0:e.trim())===i&&(t.textContent=""),t.addEventListener("focus",()=>{var e;if((null==(e=t.textContent)?void 0:e.trim())===i&&(t.textContent=""),this.selectOnFocus){let e=window.getSelection(),i=document.createRange();i.selectNodeContents(t),null==e||e.removeAllRanges(),null==e||e.addRange(i)}}),t.addEventListener("blur",()=>{var e;null!=(e=t.textContent)&&e.trim()||(t.textContent=i||"")}),"email"===t.dataset.fieldType&&t.addEventListener("input",()=>{var e;let i=(null==(e=t.textContent)?void 0:e.trim())||"";i&&!i.includes("@")?t.style.color="#dc2626":t.style.color="#1e40af"})}updateDataReactively(t,e,i){this._isUpdatingUI||(this.formManager.setFieldValue(t,e),this.data={...this.data,[t]:e},this.syncUIFromData(t,i),this.emitFieldEvents(t,e))}syncUIFromData(t,e){if(!this._isUpdatingUI){this._isUpdatingUI=!0;try{if(this.domBinder.syncFormData(this.data,{querySelector:t=>{var e;return null==(e=this.shadowRoot)?void 0:e.querySelector(t)},querySelectorAll:t=>{var e;return Array.from((null==(e=this.shadowRoot)?void 0:e.querySelectorAll(t))||[])}}),t){var i;let n=null!=(i=this.data[t])?i:"",r=this.fieldRegistry.get(t);null==r||r.forEach(t=>{t!==e&&this.setElementValue(t,n)})}}finally{this._isUpdatingUI=!1}}}setElementValue(t,e){let i=this.fieldProcessor.getFieldType(t);if(!this.fieldProcessor.setFieldValue(t,e,i,{querySelector:t=>{var e;return null==(e=this.shadowRoot)?void 0:e.querySelector(t)},querySelectorAll:t=>{var e;return Array.from((null==(e=this.shadowRoot)?void 0:e.querySelectorAll(t))||[])}})&&t instanceof HTMLElement){if(t.hasAttribute("contenteditable")){let i=Array.isArray(e)?e.join(", "):String(e);t.textContent!==i&&(t.textContent=i)}else if(t instanceof HTMLInputElement){if("checkbox"===t.type&&"boolean"==typeof e)t.checked=e;else if("checkbox"!==t.type&&"radio"!==t.type){let i=Array.isArray(e)?e.join(", "):String(e);t.value!==i&&(t.value=i)}}else if(t instanceof HTMLTextAreaElement||t instanceof HTMLSelectElement){let i=Array.isArray(e)?e.join(", "):String(e);t.value!==i&&(t.value=i)}}}getFieldName(t){return t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement||t instanceof HTMLSelectElement?t.name||t.id||null:t.dataset.fieldName||t.id||null}getElementInitialValue(t){var e,i;if(t instanceof HTMLInputElement)return"checkbox"===t.type?t.hasAttribute("checked")?"true"===t.value||t.value:null:"radio"===t.type?t.hasAttribute("checked")?t.value:null:t.hasAttribute("value")&&t.getAttribute("value")?t.getAttribute("value")||"":null;if(t instanceof HTMLTextAreaElement)return(null==(e=t.textContent)?void 0:e.trim())||null;if(t instanceof HTMLSelectElement){let e=t.querySelector("option[selected]");return e?e.value:null}if(t.hasAttribute("contenteditable")){let e=t.getAttribute("data-value");if(e)return e;let n=null==(i=t.textContent)?void 0:i.trim();return n&&n!==t.dataset.placeholder?n:null}return null}registerField(t,e){this.fieldRegistry.has(t)||this.fieldRegistry.set(t,new Set),this.fieldRegistry.get(t).add(e)}emitFieldEvents(t,e){let i=this.getFormData();this.dispatchEvent(new CustomEvent("formdown-change",{detail:{fieldName:t,value:e,formData:i},bubbles:!0})),this.dispatchEvent(new CustomEvent("formdown-data-update",{detail:{formData:i},bubbles:!0}))}syncFieldValue(t,e){this.data={...this.data,[t]:e},this.emitFieldEvents(t,e)}updateFormData(t,e){this.data={...this.data,[t]:e},this.emitFieldEvents(t,e)}getFormData(){return{...this.data}}getDefaultValues(){if(!this._schema)return{};let t={};return Object.entries(this._schema).forEach(e=>{let[i,n]=e;void 0!==n.value&&(t[i]=n.value)}),t}getSchemaDefaultValue(t){if(!(!this._schema||!this._schema[t]))return this._schema[t].value}clearValidationStates(){var t;let e=null==(t=this.shadowRoot)?void 0:t.querySelector("#content-container");e&&(e.querySelectorAll(".field-error, .field-valid").forEach(t=>{t.classList.remove("field-error","field-valid")}),e.querySelectorAll(".validation-error-message").forEach(t=>{t.remove()}))}resetForm(){var t;let e=this.getFormId(),i=null==(t=this.shadowRoot)?void 0:t.querySelector("#".concat(e));i&&i.reset(),this.data={},this.clearValidationStates()}constructor(){super(),this.content="",this.selectOnFocus=!0,this.formId="",this.showSubmitButton=!0,this.submitText="Submit",this._data={},this.fieldRegistry=new Map,this._isUpdatingUI=!1,this._schema=null,this._uniqueFormId=this.formId||"formdown-".concat(Math.random().toString(36).substring(2,15)),this.formManager=new l.A,this.fieldProcessor=this.formManager.createFieldProcessor(),this.domBinder=this.formManager.createDOMBinder(),this.setupCoreUIBridge(),this.setupFormManagerEvents()}};W.styles=(0,a.AH)(p()),V([D()],W.prototype,"content",2),V([D({type:Boolean,attribute:"select-on-focus"})],W.prototype,"selectOnFocus",2),V([D({attribute:"form-id"})],W.prototype,"formId",2),V([D({type:Boolean,attribute:"show-submit-button"})],W.prototype,"showSubmitButton",2),V([D({attribute:"submit-text"})],W.prototype,"submitText",2),V([D({type:Object})],W.prototype,"data",1),W=V([(t=>(e,i)=>{void 0!==i?i.addInitializer(()=>{customElements.define(t,e)}):customElements.define(t,e)})("formdown-ui")],W);let K=Object.freeze(Object.defineProperty({__proto__:null,get FormdownUI(){return W}},Symbol.toStringTag,{value:"Module"})),J=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=document.createElement("formdown-ui");return e.content&&(i.content=e.content),e.formId&&(i.formId=e.formId),void 0!==e.showSubmitButton&&(i.showSubmitButton=e.showSubmitButton),e.submitText&&(i.submitText=e.submitText),t.appendChild(i),i},Y=()=>{customElements.get("formdown-ui")||Promise.resolve().then(()=>K)}},5082:(t,e,i)=>{i.d(e,{WF:()=>tp,AH:()=>h,qy:()=>J,iz:()=>l});let n=globalThis,r=n.ShadowRoot&&(void 0===n.ShadyCSS||n.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,s=Symbol(),o=new WeakMap;class a{constructor(t,e,i){if(this._$cssResult$=!0,i!==s)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o,e=this.t;if(r&&void 0===t){let i=void 0!==e&&1===e.length;i&&(t=o.get(e)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),i&&o.set(e,t))}return t}toString(){return this.cssText}}let l=t=>new a("string"==typeof t?t:t+"",void 0,s),h=(t,...e)=>new a(1===t.length?t[0]:e.reduce((e,i,n)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[n+1],t[0]),t,s),d=(t,e)=>{if(r)t.adoptedStyleSheets=e.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet);else for(let i of e){let e=document.createElement("style"),r=n.litNonce;void 0!==r&&e.setAttribute("nonce",r),e.textContent=i.cssText,t.appendChild(e)}},c=r?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(let i of t.cssRules)e+=i.cssText;return l(e)})(t):t,{is:u,defineProperty:p,getOwnPropertyDescriptor:m,getOwnPropertyNames:f,getOwnPropertySymbols:g,getPrototypeOf:y}=Object,v=globalThis,b=v.trustedTypes,_=b?b.emptyScript:"",$=v.reactiveElementPolyfillSupport,E=(t,e)=>t,w={toAttribute(t,e){switch(e){case Boolean:t=t?_:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let i=t;switch(e){case Boolean:i=null!==t;break;case Number:i=null===t?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch(t){i=null}}return i}},S=(t,e)=>!u(t,e),A={attribute:!0,type:String,converter:w,reflect:!1,useDefault:!1,hasChanged:S};Symbol.metadata??=Symbol("metadata"),v.litPropertyMetadata??=new WeakMap;class x extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,e=A){if(e.state&&(e.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(t)&&((e=Object.create(e)).wrapped=!0),this.elementProperties.set(t,e),!e.noAccessor){let i=Symbol(),n=this.getPropertyDescriptor(t,i,e);void 0!==n&&p(this.prototype,t,n)}}static getPropertyDescriptor(t,e,i){let{get:n,set:r}=m(this.prototype,t)??{get(){return this[e]},set(t){this[e]=t}};return{get:n,set(e){let s=n?.call(this);r?.call(this,e),this.requestUpdate(t,s,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??A}static _$Ei(){if(this.hasOwnProperty(E("elementProperties")))return;let t=y(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(E("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(E("properties"))){let t=this.properties;for(let e of[...f(t),...g(t)])this.createProperty(e,t[e])}let t=this[Symbol.metadata];if(null!==t){let e=litPropertyMetadata.get(t);if(void 0!==e)for(let[t,i]of e)this.elementProperties.set(t,i)}for(let[t,e]of(this._$Eh=new Map,this.elementProperties)){let i=this._$Eu(t,e);void 0!==i&&this._$Eh.set(i,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){let e=[];if(Array.isArray(t))for(let i of new Set(t.flat(1/0).reverse()))e.unshift(c(i));else void 0!==t&&e.push(c(t));return e}static _$Eu(t,e){let i=e.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(t=>t(this))}addController(t){(this._$EO??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.()}removeController(t){this._$EO?.delete(t)}_$E_(){let t=new Map;for(let e of this.constructor.elementProperties.keys())this.hasOwnProperty(e)&&(t.set(e,this[e]),delete this[e]);t.size>0&&(this._$Ep=t)}createRenderRoot(){let t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return d(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(t=>t.hostConnected?.())}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach(t=>t.hostDisconnected?.())}attributeChangedCallback(t,e,i){this._$AK(t,i)}_$ET(t,e){let i=this.constructor.elementProperties.get(t),n=this.constructor._$Eu(t,i);if(void 0!==n&&!0===i.reflect){let r=(void 0!==i.converter?.toAttribute?i.converter:w).toAttribute(e,i.type);this._$Em=t,null==r?this.removeAttribute(n):this.setAttribute(n,r),this._$Em=null}}_$AK(t,e){let i=this.constructor,n=i._$Eh.get(t);if(void 0!==n&&this._$Em!==n){let t=i.getPropertyOptions(n),r="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:w;this._$Em=n,this[n]=r.fromAttribute(e,t.type)??this._$Ej?.get(n)??null,this._$Em=null}}requestUpdate(t,e,i){if(void 0!==t){let n=this.constructor,r=this[t];if(!(((i??=n.getPropertyOptions(t)).hasChanged??S)(r,e)||i.useDefault&&i.reflect&&r===this._$Ej?.get(t)&&!this.hasAttribute(n._$Eu(t,i))))return;this.C(t,e,i)}!1===this.isUpdatePending&&(this._$ES=this._$EP())}C(t,e,{useDefault:i,reflect:n,wrapped:r},s){i&&!(this._$Ej??=new Map).has(t)&&(this._$Ej.set(t,s??e??this[t]),!0!==r||void 0!==s)||(this._$AL.has(t)||(this.hasUpdated||i||(e=void 0),this._$AL.set(t,e)),!0===n&&this._$Em!==t&&(this._$Eq??=new Set).add(t))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}let t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(let[t,e]of this._$Ep)this[t]=e;this._$Ep=void 0}let t=this.constructor.elementProperties;if(t.size>0)for(let[e,i]of t){let{wrapped:t}=i,n=this[e];!0!==t||this._$AL.has(e)||void 0===n||this.C(e,void 0,i,n)}}let t=!1,e=this._$AL;try{(t=this.shouldUpdate(e))?(this.willUpdate(e),this._$EO?.forEach(t=>t.hostUpdate?.()),this.update(e)):this._$EM()}catch(e){throw t=!1,this._$EM(),e}t&&this._$AE(e)}willUpdate(t){}_$AE(t){this._$EO?.forEach(t=>t.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Eq&&=this._$Eq.forEach(t=>this._$ET(t,this[t])),this._$EM()}updated(t){}firstUpdated(t){}}x.elementStyles=[],x.shadowRootOptions={mode:"open"},x[E("elementProperties")]=new Map,x[E("finalized")]=new Map,$?.({ReactiveElement:x}),(v.reactiveElementVersions??=[]).push("2.1.0");let C=globalThis,U=C.trustedTypes,M=U?U.createPolicy("lit-html",{createHTML:t=>t}):void 0,P="$lit$",k=`lit$${Math.random().toFixed(9).slice(2)}$`,O="?"+k,R=`<${O}>`,T=document,F=()=>T.createComment(""),H=t=>null===t||"object"!=typeof t&&"function"!=typeof t,z=Array.isArray,I=t=>z(t)||"function"==typeof t?.[Symbol.iterator],D="[ 	\n\f\r]",q=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,j=/-->/g,L=/>/g,N=RegExp(`>|${D}(?:([^\\s"'>=/]+)(${D}*=${D}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),B=/'/g,V=/"/g,W=/^(?:script|style|textarea|title)$/i,K=t=>(e,...i)=>({_$litType$:t,strings:e,values:i}),J=K(1),Y=(K(2),K(3),Symbol.for("lit-noChange")),Z=Symbol.for("lit-nothing"),G=new WeakMap,Q=T.createTreeWalker(T,129);function X(t,e){if(!z(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==M?M.createHTML(e):e}let tt=(t,e)=>{let i=t.length-1,n=[],r,s=2===e?"<svg>":3===e?"<math>":"",o=q;for(let e=0;e<i;e++){let i=t[e],a,l,h=-1,d=0;for(;d<i.length&&(o.lastIndex=d,null!==(l=o.exec(i)));)d=o.lastIndex,o===q?"!--"===l[1]?o=j:void 0!==l[1]?o=L:void 0!==l[2]?(W.test(l[2])&&(r=RegExp("</"+l[2],"g")),o=N):void 0!==l[3]&&(o=N):o===N?">"===l[0]?(o=r??q,h=-1):void 0===l[1]?h=-2:(h=o.lastIndex-l[2].length,a=l[1],o=void 0===l[3]?N:'"'===l[3]?V:B):o===V||o===B?o=N:o===j||o===L?o=q:(o=N,r=void 0);let c=o===N&&t[e+1].startsWith("/>")?" ":"";s+=o===q?i+R:h>=0?(n.push(a),i.slice(0,h)+P+i.slice(h)+k+c):i+k+(-2===h?e:c)}return[X(t,s+(t[i]||"<?>")+(2===e?"</svg>":3===e?"</math>":"")),n]};class te{constructor({strings:t,_$litType$:e},i){let n;this.parts=[];let r=0,s=0,o=t.length-1,a=this.parts,[l,h]=tt(t,e);if(this.el=te.createElement(l,i),Q.currentNode=this.el.content,2===e||3===e){let t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(n=Q.nextNode())&&a.length<o;){if(1===n.nodeType){if(n.hasAttributes())for(let t of n.getAttributeNames())if(t.endsWith(P)){let e=h[s++],i=n.getAttribute(t).split(k),o=/([.?@])?(.*)/.exec(e);a.push({type:1,index:r,name:o[2],strings:i,ctor:"."===o[1]?to:"?"===o[1]?ta:"@"===o[1]?tl:ts}),n.removeAttribute(t)}else t.startsWith(k)&&(a.push({type:6,index:r}),n.removeAttribute(t));if(W.test(n.tagName)){let t=n.textContent.split(k),e=t.length-1;if(e>0){n.textContent=U?U.emptyScript:"";for(let i=0;i<e;i++)n.append(t[i],F()),Q.nextNode(),a.push({type:2,index:++r});n.append(t[e],F())}}}else if(8===n.nodeType)if(n.data===O)a.push({type:2,index:r});else{let t=-1;for(;-1!==(t=n.data.indexOf(k,t+1));)a.push({type:7,index:r}),t+=k.length-1}r++}}static createElement(t,e){let i=T.createElement("template");return i.innerHTML=t,i}}function ti(t,e,i=t,n){if(e===Y)return e;let r=void 0!==n?i._$Co?.[n]:i._$Cl,s=H(e)?void 0:e._$litDirective$;return r?.constructor!==s&&(r?._$AO?.(!1),void 0===s?r=void 0:(r=new s(t))._$AT(t,i,n),void 0!==n?(i._$Co??=[])[n]=r:i._$Cl=r),void 0!==r&&(e=ti(t,r._$AS(t,e.values),r,n)),e}class tn{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){let{el:{content:e},parts:i}=this._$AD,n=(t?.creationScope??T).importNode(e,!0);Q.currentNode=n;let r=Q.nextNode(),s=0,o=0,a=i[0];for(;void 0!==a;){if(s===a.index){let e;2===a.type?e=new tr(r,r.nextSibling,this,t):1===a.type?e=new a.ctor(r,a.name,a.strings,this,t):6===a.type&&(e=new th(r,this,t)),this._$AV.push(e),a=i[++o]}s!==a?.index&&(r=Q.nextNode(),s++)}return Q.currentNode=T,n}p(t){let e=0;for(let i of this._$AV)void 0!==i&&(void 0!==i.strings?(i._$AI(t,i,e),e+=i.strings.length-2):i._$AI(t[e])),e++}}class tr{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,e,i,n){this.type=2,this._$AH=Z,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=i,this.options=n,this._$Cv=n?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode,e=this._$AM;return void 0!==e&&11===t?.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){H(t=ti(this,t,e))?t===Z||null==t||""===t?(this._$AH!==Z&&this._$AR(),this._$AH=Z):t!==this._$AH&&t!==Y&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):I(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==Z&&H(this._$AH)?this._$AA.nextSibling.data=t:this.T(T.createTextNode(t)),this._$AH=t}$(t){let{values:e,_$litType$:i}=t,n="number"==typeof i?this._$AC(t):(void 0===i.el&&(i.el=te.createElement(X(i.h,i.h[0]),this.options)),i);if(this._$AH?._$AD===n)this._$AH.p(e);else{let t=new tn(n,this),i=t.u(this.options);t.p(e),this.T(i),this._$AH=t}}_$AC(t){let e=G.get(t.strings);return void 0===e&&G.set(t.strings,e=new te(t)),e}k(t){z(this._$AH)||(this._$AH=[],this._$AR());let e=this._$AH,i,n=0;for(let r of t)n===e.length?e.push(i=new tr(this.O(F()),this.O(F()),this,this.options)):i=e[n],i._$AI(r),n++;n<e.length&&(this._$AR(i&&i._$AB.nextSibling,n),e.length=n)}_$AR(t=this._$AA.nextSibling,e){for(this._$AP?.(!1,!0,e);t&&t!==this._$AB;){let e=t.nextSibling;t.remove(),t=e}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}}class ts{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,e,i,n,r){this.type=1,this._$AH=Z,this._$AN=void 0,this.element=t,this.name=e,this._$AM=n,this.options=r,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=Z}_$AI(t,e=this,i,n){let r=this.strings,s=!1;if(void 0===r)(s=!H(t=ti(this,t,e,0))||t!==this._$AH&&t!==Y)&&(this._$AH=t);else{let n,o,a=t;for(t=r[0],n=0;n<r.length-1;n++)(o=ti(this,a[i+n],e,n))===Y&&(o=this._$AH[n]),s||=!H(o)||o!==this._$AH[n],o===Z?t=Z:t!==Z&&(t+=(o??"")+r[n+1]),this._$AH[n]=o}s&&!n&&this.j(t)}j(t){t===Z?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}class to extends ts{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===Z?void 0:t}}class ta extends ts{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==Z)}}class tl extends ts{constructor(t,e,i,n,r){super(t,e,i,n,r),this.type=5}_$AI(t,e=this){if((t=ti(this,t,e,0)??Z)===Y)return;let i=this._$AH,n=t===Z&&i!==Z||t.capture!==i.capture||t.once!==i.once||t.passive!==i.passive,r=t!==Z&&(i===Z||n);n&&this.element.removeEventListener(this.name,this,i),r&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class th{constructor(t,e,i){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(t){ti(this,t)}}let td=C.litHtmlPolyfillSupport;td?.(te,tr),(C.litHtmlVersions??=[]).push("3.3.0");let tc=(t,e,i)=>{let n=i?.renderBefore??e,r=n._$litPart$;if(void 0===r){let t=i?.renderBefore??null;n._$litPart$=r=new tr(e.insertBefore(F(),t),t,void 0,i??{})}return r._$AI(t),r},tu=globalThis;class tp extends x{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){let t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){let e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=tc(e,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return Y}}tp._$litElement$=!0,tp.finalized=!0,tu.litElementHydrateSupport?.({LitElement:tp});let tm=tu.litElementPolyfillSupport;tm?.({LitElement:tp}),(tu.litElementVersions??=[]).push("4.2.0")},5933:(t,e,i)=>{i.d(e,{_:()=>n});function n(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}}}]);